<mat-card class="cardWithShadow theme-card">
  <mat-card-header>
    <div class="d-flex justify-content-between align-items-center w-100">
      <mat-card-title class="m-0">Ordonnances</mat-card-title>
      <button mat-raised-button class="btn btn-success custom-btn" (click)="openAddPrescriptionDialog()">
        Ajouter Ordonnance
      </button>      
    </div>
  </mat-card-header>

  <mat-card-content class="b-t-1">
    <div class="table-responsive">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 table table-striped">
        <!-- Code Patient -->
        <ng-container matColumnDef="codePatient">
          <th mat-header-cell *matHeaderCellDef> Code Patient </th>
          <td mat-cell *matCellDef="let ordonnance"> {{ ordonnance.codePatient }} </td>
        </ng-container>

        <!-- Description -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef> Description </th>
          <td mat-cell *matCellDef="let ordonnance"> {{ ordonnance.description }} </td>
        </ng-container>

        <!-- Médicaments -->
        <ng-container matColumnDef="medicaments">
          <th mat-header-cell *matHeaderCellDef> Médicaments </th>
          <td mat-cell *matCellDef="let ordonnance">
            <ul class="medicament-list">
              <li *ngFor="let med of ordonnance.medicaments">
                <strong>{{ med.medicamentName }}</strong> - {{ med.posologie }} - {{ med.frequence }}
              </li>
            </ul>
          </td>
        </ng-container>

        <!-- Date de création -->
        <ng-container matColumnDef="createdAt">
          <th mat-header-cell *matHeaderCellDef> Créé le </th>
          <td mat-cell *matCellDef="let ordonnance"> {{ ordonnance.createdAt }} </td>
        </ng-container>

        <!-- En-têtes et lignes -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <!-- ✅ Ajout du paginator -->
      <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
  </mat-card-content>
</mat-card>
